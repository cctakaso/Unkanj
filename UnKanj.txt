========================================================================
 UNKANJ(.EXE/.DLL) Ver 0.05
 *------------------------------------*
                                              by オグ (2025.12.09)
========================================================================
このたびは「UNKANJ」をダウンロードして頂きありがとうございます。

　　コマンド及びＧＵＩ上での インターネット文書の漢字変換をサポート
　するものです。
　本アーカイブには、以下の環境で動作するモジュール及びそれらを作成する
　ＳＤＫ(ソース)が収録されています。
  コマンドのパラメータ及び、ＤＬＬインタフェース詳細については、
  unakanj.h をご覧ください。

　32bit コマンドバージョン
　　unkanj.exe ......................Windows 95/98 DOSプロンプト
         　                          Windows NT 3.51/4.0 DOSプロンプト
         　                          Windows 8, 10, 11 DOSプロンプト, PowerShell
　32bit モジュールバージョン
　　unkanj.dll ......................Windows 95/98
       　                            Windows NT 3.51/4.0
       　                            Windows 8, 10, 11

◆ UNKANJ 対応プログラムで使用するための  UNKANJ.DLL のインストール
  について

  　UNKANJ.DLL をウィンドウズシステムディレクトリ
  　にコピーしてください。 他のファイルは特に必要はありません。
  　
  　（例）Win95 の場合 \Windows\System
  　（例）WinNT以降 の場合 \Windows\System32
  　（例）または、UNKANJ.DLLを使用するプログラムEXEファイルのフォルダ

  解凍したのに UNKANJ.DLL が表示されない場合は、
  　Explorer では通常  ".DLL" の拡張子をもつファイルは表示されません。
  Explorer の「表示―オプション」メニューですべてのファイルが表示される
  よう設定してください。

========================================================================

０．はじめに

  初期のソース公開バージョンを開示いたします。様々なテストケースについて、
  まだ多少不安もあるのですが、フリーとしてソースを公開します。
  通常インターネット上で交換されるテキストニュースやメールメッセージ及び
  HTMLなどについては問題なく動作するはずですので、お役に立てれば幸いです。

１．機　能

　さてUNKANJは、使用者が直接か、これを組み込んだアプリケーションにおいて、
　漢字コードの相違を解消してもらおうというものです。

  １．漢字コード変換などの基本機能について

    １）漢字コードの変換機能
    　　以下の３つの主要な漢字コードの相互変換を実現しています。

        1) JIS  -  7bitJIS
            ISO-2022-JP
            JIS X 0208-1983(90)
            JIS X 0208-1978
        2) EUC - AT&T JIS
            115〜119区（IBM 拡張文字）については OSF/JVC（Open Software 
            Foundation 日本ベンダ協議会）が96年に定めた変換テーブルによる
        3) シフトＪＩＳ - MS Kanj
        　　JIS X 0208-1990 をベースに、NEC 特殊文字（13区）、
            NEC 選定 IBM 拡張文字（89〜92区）、IBM 拡張文字（115〜119区）
        4) UTF-8 - Unicode

　    　 ※EUC<->SJISとの外字(IBM 拡張文字(394文字))相互変換は、
　                     ENABLE_IBM_EXPAND_CODESデファイン時のみ

    ２）漢字コードの自動認識機能
　　　　特定できる文字が最初に見つかった時点でソースコード種別は特定され
　　　ます。また、ある文字コードに対して２つ以上の解釈が存在する場合は、
　　　得点をカウントしていき最終的に全ファイルサイズに対する線形な割合で
　　　判定します。これにより今まで判定不可だったものもある程度判定可能と
　　　なります。
    　　尚、自動判定は変換処理に対して冗長な処理には違いありませんので
  　　判定範囲を特定できるように、指定サイズの最初のリード処理内でのみ行っ
　　　ています。
    　　
  　３）UNIX, DOS(WINDOWS), MAC　改行コードの相互変換機能
  
  ２．ユーザーインタフェース
　　　コマンドバージョンの他、ＤＬＬバージョンではユーザープログラムに
　　バイナリーレベルで組み込み使用できるインタフェース機能も有しています。
　　その際のインタフェースは大きくは以下の２つの特徴があります。
　　１）ANSI標準Cのファイルライブラリ準じたインタフェース
　　　　漢字コード変換機能付きのファイルハンドルをオープン取得して
　　　ファイルリードAPIで読み込む事ができます。
　　２）『統合アーカイバＡＰＩ仕様』にも沿う形にもなっています。
　　　これは、既存のアーカイバアプリに少々手を加える形で漢字コード変換機能
　　を実現できるかもしれないし(?おいおい)、何より”アーカイバＡＰＩ”に慣
　　れた方ならアプリケーション作成の負担も軽くなるだろうという発想からです。

　３．ソースコード
　　　ANSI標準C++で作られています。私の知る限りではこの分野のソフトで、且つ
　　公開されているものとしては初めてだと思います。
　　Ｃでも同様な処理が可能かと思いますが、理由としては一つにはＧＮＵを始めと
　　するフリーまたは市販のコンパイラがC++を採用され環境も整ってきた事。
　　そして何より、作者自身がここ数年もっとも使用する開発言語となっている
　　為です。^^)
　
　４．パフォーマンスに関する特色
　  １）超高速コード判定＆変換
  　　　様々な高速動作の為の仕組みが組み込まれています。
　　　そもそも漢字変換の高速化は、このプロジェクトを始めた第一の理由なの
　　　です。特にputchar()/getchar()を多用しているプロジェクトに比較すると
　　　ファイルアクセスは極端に少ない為、すごく差があります。

　　２）マルチタスク対応
　　　　変換用C++クラスのインスタンスを作成し、完全なマルチタスクを実現
　　　しています。


  　UNKANJ は開発中のバージョンであり、API 等については今後変更される
  ことが考えられます。現在のものが最終決定版ではないということを十分ご理解
  の上ご使用ください。


  ------------ 
   今後も機能追加をしていくつもりですので
  こんな事できたらいいなとか、こんな機能がほしいとか遠慮なく言ってください。
                                                                     m- -m;

１．ファイルについて

    UKANJ005.EXE / UKANJ005.LZH を解凍すると以下のファイルがあります。

        unkanj.exe    : ３２ビット版ＥＸＥコマンド版　本体です。
        unkanj.dll    : ３２ビット版ＤＬＬライブラリ版　本体です。
        unkanj.H    : unkanj.dll を使用するためのヘッダファイルです。
                      API 説明ファイル／コマンドオプション 説明ファイルを
                      兼ねています。（ちょっと長い）
        unkanj.lib    : unkanj.dll を使用するためのインポートライブラリです。
        　　　　　　　ただし、VC++ 用なので BC++ では使用できません。

        unkanj.txt    : このドキュメントです。
        unkanj_sdk.lzh    ：　unkanj を構築する為のプログラムソース一式
        　　　　　　　　　　これを解凍すると以下のファイルがあります。
　　　　<UNKANJ SDK>
            UnKanj.dsw ：MS-VC++ DLL版 プロジェクトファイル
            　　　　　　　　　　　　　　（UnkanjC.dswを挿入してある）
            UnkanjC.dsw：MS-VC++ コマンド版　プロジェクトファイル
            UnKanj.mak ：C++ DLL版      メイクファイル
            UnKanjC.mak：C++ コマンド版 メイクファイル
            
            swenv.h     ...... 標準ライブラリ環境設定
            unkanj.h    ...... DLL関数やエラーコードの定義
            pp_unkanj.h ...... 変換クラス本体 CUnKanjなど
            unkanj.cpp  ...... 変換クラス本体 CUnKanjやmain()など
            unkandll.cpp ..... DLLラッパー関数群（DLL版作成時のみ使用）
            unkanj.def  ...... DLLエクスポート定義（DLL版作成時のみ使用）

            尚、ソースはDLL版、コマンド版で共有されています。
            そのせいで、ちょっと見づらくなってますが・・・^^;

２．動作環境

　unkanj は以下の環境での動作を対象にしています。 

    ・Microsoft Windows 8, 10, 11
    ・Microsoft NT 4.0J
    ・Microsoft NT 3.51
    ・Microsoft Windows 95J
    ・Microsoft Windows 98J
    ・Microsoft Windows 3.1J + Win32s (*

    （* は、当方では未確認です。
            動いたよとか動かないよとか、ご一報頂ければ幸いです。

３．転載及び著作権について

  　UNKANJ はフリーソフトウェアです。商用目的ではない 使用、転載、及び配
　付に関しては特に制限は付けません。ただし、転載・配付する場合メディア代等
　以上の手数料を徴収したり、使用に制限を付けることはこれを禁じます。
　また、転載・配付時に書庫ファイル及び格納ファイルを改変することも禁じます。
　転載時には、事後でも構いませんので私まで連絡をお願いします。

  本ソフトウェアの著作権は私が保有しています。

  　これらのプログラムの使用によって生じた損害等については、作者及び著作者
  は何も保証する義務を負わないこととさせていただきます。

４．サポートについて
    メール    
            takashi ogisawa  E-Mail: taka.ogi@gmail.com
              転載、収録・使用許諾等もこちらにお願いします。


５．更新履歴
  -V0.02-
  ・漢字判定のロジックの調整
  ・２回層以上のサブディレクトリのファイル作成バグ対応
  ・エラー時処理のバグ対応
  ・マルチタスク対応化
 
  -V0.03-
  ・小さなファイルの漢字判定精度をあげました
  　　（大きなファイルよりかえって判定が難しい・・・^^;）
  ・ファイルをバイナリモードで読み書きするようにしました。
  　（改行が壊れた巨大ファイルの変換の場合に元ファイル行数と
  　　合わない理由でした）
　・一番要望が多かったアーカイブ共通APIである
　　FindFirst()/FindNext()などを追加しました。
　・他の共通変換DLLとの整合性から（というより、今後DLLごとに関数名を
　　変えるのは使い勝手が悪いので）ccXXXXX()というように統一しました。
 
  -V0.05-
　・コマンド版作成追加
　・漢字コード判定のみ行う命令の追加
　・各種スイッチオプションの追加
    -<CRLF/CR/LF> -R<nn> -KI<?> -KO<?> -G<0/1>
　　詳細は、unaknj.h スイッチ説明をみて下さい。
　・ソースコード上で、MFCを使っても作成できるようにしていたのですが、
　　ANSI C++で十分である事が判明したのでソースを整理しました。
 
６．謝辞

　　今回 UNKANJ を作成するに当たって、Nifty-Serve 内の様々な関連会議室や
　ライブラリなどを参考にさせていただきました。
　（初めは作る気はなく、いいものを探していただけという話もありますが･･･^^;）

　日本語コード及びそのソフトウェアモジュール群は、コンピュータ上で日本語を
　扱えるようにしてきた先人達の努力の賜物です。
　今回、漢字コード変換を私なりにまとめてみるのも意義があるのかなと思って作り
　ました。少しは役に立てば幸いです。
　お蔭様で、日本語コード変換エンジン部分はシンプルで且つ早いものにできたと思
　います。

　コンピュータ上での日本語表示に関しては、古いようで今も存在する問題です。
　とはいえ日常使用でこうして問題なく日本語を表示される素晴らしい環境を作り上
　げてこられたすべての方に感謝を送ります。

            Takashi Ogisawa   E-Mail: taka.ogi@gmail.com
【　参考文献　】
『ＪＩＳハンドブック　情報処理　用語・コード編』（財）日本規格協会　他
